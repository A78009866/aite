{% extends 'network/layout.html' %}
{% block body %}
{% load static %}

<h2>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>

<form method="post" action="{% url 'add_post' %}" enctype="multipart/form-data" class="mb-4">
    {% csrf_token %}
    <div class="form-group">
        <textarea name="body" class="form-control" placeholder="Ø§ÙƒØªØ¨ Ù…Ù†Ø´ÙˆØ±Ù‹Ø§..." required></textarea>
    </div>
    <div class="form-group">
        <input type="file" name="image" class="form-control-file" accept="image/*">
    </div>
    <button type="submit" class="btn btn-primary">Ù†Ø´Ø±</button>
</form>

<hr>


<div class="card mb-4">
    <div class="card-body">
        <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
                <a href="{% url 'profile' post.user.username %}">
                    {% if post.user.profile.profile_picture %}
                        <img src="{{ post.user.profile.profile_picture.url }}" class="profile-picture rounded-circle me-2" alt="Ø¨Ø±ÙˆÙØ§ÙŠÙ„">
                    {% else %}
                        <img src="{% static 'network/default_profile.png' %}" class="profile-picture rounded-circle me-2" alt="Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ">
                    {% endif %}
                </a>
                <h5 class="card-title m-0">{{ post.user.username }}</h5>
            </div>

            <!-- Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ù†Ø´ÙˆØ± -->
            {% if post.user == request.user %}
                <form method="post" action="{% url 'delete_post' post.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm">Ø­Ø°Ù</button>
                </form>
            {% endif %}
        </div>

        <p class="card-text">{{ post.body }}</p>
        {% if post.image %}
            <img src="{{ post.image.url }}" class="img-fluid rounded">
        {% endif %}

        <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ -->
        <div class="d-flex align-items-center mt-2">
            <form method="post" action="{% url 'like_post' post.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-primary btn-sm">
                    ğŸ‘ {{ post.likes.count }} Ø¥Ø¹Ø¬Ø§Ø¨
                </button>
            </form>
        </div>
    </div>
</div>

</div>

{% empty %}
    <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø¹Ø¯.</p>
{% endfor %}

{% endblock %}
